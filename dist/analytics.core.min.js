/* analytics.js-core 3.0.0-3 */
var analytics=function(){"use strict";var f="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(t,e){return t(e={exports:{}},e.exports),e.exports}var i=t(function(t){function r(t){if(t)return function(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}(t)}(t.exports=r).prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var o=0;o<n.length;o++)if((r=n[o])===e||r.fn===e){n.splice(o,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks["$"+t];if(r)for(var n=0,o=(r=r.slice(0)).length;n<o;++n)r[n].apply(this,e);return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}}),a=t(function(t){function o(s){return function(n,o,t,e){var i,a=e&&function(t){return"function"==typeof t}(e.normalizer)?e.normalizer:c;o=a(o);for(var u=!1;!u;)r();function r(){for(i in n){var t=a(i);if(0===o.indexOf(t)){var e=o.substr(t.length);if("."===e.charAt(0)||0===e.length){o=e.substr(1);var r=n[i];return null==r?void(u=!0):o.length?void(n=r):void(u=!0)}}}u=!(i=void 0)}if(i)return null==n?n:s(n,i,t)}}function n(t,e){return t.hasOwnProperty(e)&&delete t[e],t}function i(t,e,r){return t.hasOwnProperty(e)&&(t[e]=r),t}function c(t){return t.replace(/[^a-zA-Z0-9\.]+/g,"").toLowerCase()}t.exports=o(function(t,e){if(t.hasOwnProperty(e))return t[e]}),t.exports.find=t.exports,t.exports.replace=function(t,e,r,n){return o(i).call(this,t,e,r,n),t},t.exports.del=function(t,e,r){return o(n).call(this,t,e,null,r),t}}),e=(a.find,a.replace,a.del,t(function(t){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;function r(){}r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}})),r=Object.prototype.toString,c=function(t){switch(r.call(t)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===t?"null":void 0===t?"undefined":t!=t?"nan":t&&1===t.nodeType?"element":function(t){return!(null==t||!(t._isBuffer||t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)))}(t)?"buffer":typeof(t=t.valueOf?t.valueOf():Object.prototype.valueOf.apply(t))};function n(t){return l.date(t)?t:l.number(t)?new Date(function(t){return t<315576e5?1e3*t:t}(t)):d(t)?y(t):m(t)?g(t):w(t)?x(t):new Date(t)}var u=function t(e){var r=c(e);if("object"===r){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=t(e[o]));return n}if("array"===r){n=new Array(e.length);for(var i=0,a=e.length;i<a;i++)n[i]=t(e[i]);return n}if("regexp"!==r)return"date"===r?new Date(e.getTime()):e;var u="";return u+=e.multiline?"m":"",u+=e.global?"g":"",u+=e.ignoreCase?"i":"",new RegExp(e.source,u)},o=Object.prototype.toString,s={inherit:e,clone:u,type:function(t){switch(o.call(t)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array"}return null===t?"null":void 0===t?"undefined":t===Object(t)?"object":typeof t}},p={Salesforce:!0},l=t(function(t){function i(t){return t!=t}var e=Object.prototype,n=e.hasOwnProperty,o=e.toString,a={boolean:1,number:1,string:1,undefined:1},u=t.exports={};u.a=u.type=function(t,e){return typeof t===e},u.defined=function(t){return void 0!==t},u.empty=function(t){var e,r=o.call(t);if("[object Array]"===r||"[object Arguments]"===r)return 0===t.length;if("[object Object]"!==r)return"[object String]"===r&&""===t;for(e in t)if(n.call(t,e))return!1;return!0},u.equal=function(t,e){var r,n=o.call(t);if(n!==o.call(e))return!1;if("[object Object]"===n){for(r in t)if(!u.equal(t[r],e[r]))return!1;return!0}if("[object Array]"!==n)return"[object Function]"===n?t.prototype===e.prototype:"[object Date]"===n?t.getTime()===e.getTime():t===e;if((r=t.length)!==e.length)return!1;for(;--r;)if(!u.equal(t[r],e[r]))return!1;return!0},u.hosted=function(t,e){var r=typeof e[t];return"object"==r?!!e[t]:!a[r]},u.instance=u.instanceof=function(t,e){return t instanceof e},u.null=function(t){return null===t},u.undefined=function(t){return void 0===t},u.arguments=function(t){var e="[object Arguments]"===o.call(t),r=!u.array(t)&&u.arraylike(t)&&u.object(t)&&u.fn(t.callee);return e||r},u.array=function(t){return"[object Array]"===o.call(t)},u.arguments.empty=function(t){return u.arguments(t)&&0===t.length},u.array.empty=function(t){return u.array(t)&&0===t.length},u.arraylike=function(t){return!!t&&!u.boolean(t)&&n.call(t,"length")&&isFinite(t.length)&&u.number(t.length)&&0<=t.length},u.boolean=function(t){return"[object Boolean]"===o.call(t)},u.false=function(t){return u.boolean(t)&&(!1===t||!1===t.valueOf())},u.true=function(t){return u.boolean(t)&&(!0===t||!0===t.valueOf())},u.date=function(t){return"[object Date]"===o.call(t)},u.element=function(t){return void 0!==t&&"undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&1===t.nodeType},u.error=function(t){return"[object Error]"===o.call(t)},u.fn=u.function=function(t){return"undefined"!=typeof window&&t===window.alert||"[object Function]"===o.call(t)},u.number=function(t){return"[object Number]"===o.call(t)},u.infinite=function(t){return t===1/0||t===-1/0},u.decimal=function(t){return u.number(t)&&!i(t)&&t%1!=0},u.divisibleBy=function(t,e){var r=u.infinite(t),n=u.infinite(e),o=u.number(t)&&!i(t)&&u.number(e)&&!i(e)&&0!==e;return r||n||o&&t%e==0},u.int=function(t){return u.number(t)&&!i(t)&&t%1==0},u.maximum=function(t,e){if(i(t))throw new TypeError("NaN is not a valid value");if(!u.arraylike(e))throw new TypeError("second argument must be array-like");for(var r=e.length;0<=--r;)if(t<e[r])return!1;return!0},u.minimum=function(t,e){if(i(t))throw new TypeError("NaN is not a valid value");if(!u.arraylike(e))throw new TypeError("second argument must be array-like");for(var r=e.length;0<=--r;)if(t>e[r])return!1;return!0},u.nan=function(t){return!u.number(t)||t!=t},u.even=function(t){return u.infinite(t)||u.number(t)&&t==t&&t%2==0},u.odd=function(t){return u.infinite(t)||u.number(t)&&t==t&&t%2!=0},u.ge=function(t,e){if(i(t)||i(e))throw new TypeError("NaN is not a valid value");return!u.infinite(t)&&!u.infinite(e)&&e<=t},u.gt=function(t,e){if(i(t)||i(e))throw new TypeError("NaN is not a valid value");return!u.infinite(t)&&!u.infinite(e)&&e<t},u.le=function(t,e){if(i(t)||i(e))throw new TypeError("NaN is not a valid value");return!u.infinite(t)&&!u.infinite(e)&&t<=e},u.lt=function(t,e){if(i(t)||i(e))throw new TypeError("NaN is not a valid value");return!u.infinite(t)&&!u.infinite(e)&&t<e},u.within=function(t,e,r){if(i(t)||i(e)||i(r))throw new TypeError("NaN is not a valid value");if(!u.number(t)||!u.number(e)||!u.number(r))throw new TypeError("all arguments must be numbers");return u.infinite(t)||u.infinite(e)||u.infinite(r)||e<=t&&t<=r},u.object=function(t){return t&&"[object Object]"===o.call(t)},u.hash=function(t){return u.object(t)&&t.constructor===Object&&!t.nodeType&&!t.setInterval},u.regexp=function(t){return"[object RegExp]"===o.call(t)},u.string=function(t){return"[object String]"===o.call(t)}}),h=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/,y=function(t){var e=[1,5,6,7,11,12],r=h.exec(t),n=0;if(!r)return new Date(t);for(var o,i=0;o=e[i];i++)r[o]=parseInt(r[o],10)||0;r[2]=parseInt(r[2],10)||1,r[3]=parseInt(r[3],10)||1,r[2]--,r[8]=r[8]?(r[8]+"00").substring(0,3):0," "===r[4]?n=(new Date).getTimezoneOffset():"Z"!==r[9]&&r[10]&&(n=60*r[11]+r[12],"+"===r[10]&&(n=0-n));var a=Date.UTC(r[1],r[2],r[3],r[5],r[6]+n,r[7],r[8]);return new Date(a)},d=function(t,e){return(!e||!1!==/^\d{4}-\d{2}-\d{2}/.test(t))&&h.test(t)},v=/\d{13}/,m=function(t){return v.test(t)},g=function(t){return t=parseInt(t,10),new Date(t)},b=/\d{10}/,w=function(t){return b.test(t)},x=function(t){var e=1e3*parseInt(t,10);return new Date(e)};function j(t){switch(O.call(t)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}return null===t?"null":void 0===t?"undefined":t&&1===t.nodeType?"element":t===Object(t)?"object":typeof t}function _(t,e){var r=function(t){for(var e=[],r=0;r<t.length;r++)~e.indexOf(t[r])||e.push(t[r]);return e}(function(t){return t.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\//g,"").replace(E,"").match(/[a-zA-Z_]\w*/g)||[]}(t));return e&&"string"==typeof e&&(e=function(e){return function(t){return e+t}}(e)),e?function(t,e,r){return t.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\/|[a-zA-Z_]\w*/g,function(t){return"("==t[t.length-1]?r(t):~e.indexOf(t)?r(t):t})}(t,r,e):r}var k,O=Object.prototype.toString,E=/\b(Array|Date|Object|Math|JSON)\b/g;try{k=_}catch(t){k=_}var I=T;function T(t){switch({}.toString.call(t)){case"[object Object]":return function(t){var r={};for(var e in t)r[e]="string"==typeof t[e]?A(t[e]):T(t[e]);return function(t){if("object"!=typeof t)return!1;for(var e in r){if(!(e in t))return!1;if(!r[e](t[e]))return!1}return!0}}(t);case"[object Function]":return t;case"[object String]":return function(t){return/^ *\W+/.test(t)?new Function("_","return _ "+t):new Function("_","return "+function(t){var e,r,n,o=k(t);if(!o.length)return"_."+t;for(r=0;r<o.length;r++)n=o[r],t=N(n,t,e="('function' == typeof "+(e="_."+n)+" ? "+e+"() : "+e+")");return t}(t))}(t);case"[object RegExp]":return function(e){return function(t){return e.test(t)}}(t);default:return A(t)}}function A(e){return function(t){return e===t}}function N(t,e,r){return e.replace(new RegExp("(\\.)?"+t,"g"),function(t,e){return e?t:r})}try{var S=j}catch(t){S=j}var z=Object.prototype.hasOwnProperty,C=function(t,e,r){switch(e=I(e),r=r||this,S(t)){case"array":return D(t,e,r);case"object":return"number"==typeof t.length?D(t,e,r):function(t,e,r){for(var n in t)z.call(t,n)&&e.call(r,n,t[n])}(t,e,r);case"string":return function(t,e,r){for(var n=0;n<t.length;++n)e.call(r,t.charAt(n),n)}(t,e,r)}};function D(t,e,r){for(var n=0;n<t.length;++n)e.call(r,t[n],n)}var L=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/,P={parse:function(t){var e=[1,5,6,7,11,12],r=L.exec(t),n=0;if(!r)return new Date(t);for(var o,i=0;o=e[i];i++)r[o]=parseInt(r[o],10)||0;r[2]=parseInt(r[2],10)||1,r[3]=parseInt(r[3],10)||1,r[2]--,r[8]=r[8]?(r[8]+"00").substring(0,3):0," "===r[4]?n=(new Date).getTimezoneOffset():"Z"!==r[9]&&r[10]&&(n=60*r[11]+r[12],"+"===r[10]&&(n=0-n));var a=Date.UTC(r[1],r[2],r[3],r[5],r[6]+n,r[7],r[8]);return new Date(a)},is:function(t,e){return"string"==typeof t&&((!e||!1!==/^\d{4}-\d{2}-\d{2}/.test(t))&&L.test(t))}},q=M;function M(t,e){return void 0===e&&(e=!0),"object"==c(t)?function(r,n){return C(r,function(t,e){P.is(e,n)?r[t]=P.parse(e):"object"!=c(e)&&"array"!=c(e)||M(e,n)}),r}(t,e):"array"==c(t)?function(r,n){return C(r,function(t,e){"object"==c(t)?M(t,n):P.is(t,n)&&(r[e]=P.parse(t))}),r}(t,e):t}var B,$=s.clone,R=s.type;function F(t,e){"clone"in(e=e||{})||(e.clone=!0),e.clone&&(t=$(t)),"traverse"in e||(e.traverse=!0),t.timestamp="timestamp"in t?n(t.timestamp):new Date,e.traverse&&q(t),this.opts=e,this.obj=t}function Z(r,n){return function(){var t=this.traits(),e=this.properties?this.properties():{};return a(t,"address."+r)||a(t,r)||(n?a(t,"address."+n):null)||(n?a(t,n):null)||a(e,"address."+r)||a(e,r)||(n?a(e,"address."+n):null)||(n?a(e,n):null)}}function U(t){return $(t)}F.prototype.proxy=function(t){var e=t.split("."),r=this[t=e.shift()]||this.field(t);return r?("function"==typeof r&&(r=r.call(this)||{}),0===e.length||(r=a(r,e.join("."))),this.opts.clone?U(r):r):r},F.prototype.field=function(t){var e=this.obj[t];return this.opts.clone?U(e):e},F.proxy=function(t){return function(){return this.proxy(t)}},F.field=function(t){return function(){return this.field(t)}},F.multi=function(r){return function(){var t=this.proxy(r+"s");if("array"===R(t))return t;var e=this.proxy(r);return(e=e&&[this.opts.clone?$(e):e])||[]}},F.one=function(r){return function(){var t=this.proxy(r);if(t)return t;var e=this.proxy(r+"s");return"array"===R(e)?e[0]:void 0}},F.prototype.json=function(){var t=this.opts.clone?$(this.obj):this.obj;return this.type&&(t.type=this.type()),t},F.prototype.context=F.prototype.options=function(t){var e=this.obj.options||this.obj.context||{},r=this.opts.clone?$(e):e;if(!t)return r;if(this.enabled(t)){var n=this.integrations(),o=n[t]||a(n,t);return"object"!=typeof o&&(o=a(this.options(),t)),"object"==typeof o?o:{}}},F.prototype.enabled=function(t){var e=this.proxy("options.providers.all");"boolean"!=typeof e&&(e=this.proxy("options.all")),"boolean"!=typeof e&&(e=this.proxy("integrations.all")),"boolean"!=typeof e&&(e=!0);var r=e&&function(t){return!p[t]}(t),n=this.integrations();if(n.providers&&n.providers.hasOwnProperty(t)&&(r=n.providers[t]),n.hasOwnProperty(t)){var o=n[t];r="boolean"!=typeof o||o}return!!r},F.prototype.integrations=function(){return this.obj.integrations||this.proxy("options.providers")||this.options()},F.prototype.active=function(){var t=this.proxy("options.active");return null==t&&(t=!0),t},F.prototype.sessionId=F.prototype.anonymousId=function(){return this.field("anonymousId")||this.field("sessionId")},F.prototype.groupId=F.proxy("options.groupId"),F.prototype.traits=function(t){var e=this.proxy("options.traits")||{},r=this.userId();for(var n in t=t||{},r&&(e.id=r),t){var o=null==this[n]?this.proxy("options.traits."+n):this[n]();null!=o&&(e[t[n]]=o,delete e[n])}return e},F.prototype.library=function(){var t=this.proxy("options.library");return t?"string"==typeof t?{name:t,version:null}:t:{name:"unknown",version:null}},F.prototype.device=function(){var t=this.proxy("context.device");"object"!==R(t)&&(t={});var e=this.library().name;return t.type||(-1<e.indexOf("ios")&&(t.type="ios"),-1<e.indexOf("android")&&(t.type="android")),t},F.prototype.userAgent=F.proxy("context.userAgent"),F.prototype.timezone=F.proxy("context.timezone"),F.prototype.timestamp=F.field("timestamp"),F.prototype.channel=F.field("channel"),F.prototype.ip=F.proxy("context.ip"),F.prototype.userId=F.field("userId"),(B=F.prototype).zip=Z("postalCode","zip"),B.country=Z("country"),B.street=Z("street"),B.state=Z("state"),B.city=Z("city"),B.region=Z("region");var J=F;function H(t,e){J.call(this,t,e)}(0,s.inherit)(H,J),H.prototype.type=H.prototype.action=function(){return"alias"},H.prototype.from=H.prototype.previousId=function(){return this.field("previousId")||this.field("from")},H.prototype.to=H.prototype.userId=function(){return this.field("userId")||this.field("to")};function V(t){return/.+\@.+\..+/.test(t)}var W=H;function X(t,e){J.call(this,t,e)}(0,s.inherit)(X,J),X.prototype.type=X.prototype.action=function(){return"group"},X.prototype.groupId=J.field("groupId"),X.prototype.created=function(){var t=this.proxy("traits.createdAt")||this.proxy("traits.created")||this.proxy("properties.createdAt")||this.proxy("properties.created");if(t)return n(t)},X.prototype.email=function(){var t=this.proxy("traits.email");if(t)return t;var e=this.groupId();return V(e)?e:void 0},X.prototype.traits=function(t){var e=this.properties(),r=this.groupId();for(var n in t=t||{},r&&(e.id=r),t){var o=null==this[n]?this.proxy("traits."+n):this[n]();null!=o&&(e[t[n]]=o,delete e[n])}return e},X.prototype.name=J.proxy("traits.name"),X.prototype.properties=function(){return this.field("traits")||this.field("properties")||{}};var K=X,G=t(function(t,e){(e=t.exports=function(t){return t.replace(/^\s*|\s*$/g,"")}).left=function(t){return t.replace(/^\s*/,"")},e.right=function(t){return t.replace(/\s*$/,"")}});G.left,G.right;function Q(t,e){J.call(this,t,e)}(0,s.inherit)(Q,J),Q.prototype.type=Q.prototype.action=function(){return"identify"},Q.prototype.traits=function(t){var e=this.field("traits")||{},r=this.userId();for(var n in t=t||{},r&&(e.id=r),t){var o=null==this[n]?this.proxy("traits."+n):this[n]();null!=o&&(e[t[n]]=o,n!==t[n]&&delete e[n])}return e},Q.prototype.email=function(){var t=this.proxy("traits.email");if(t)return t;var e=this.userId();return V(e)?e:void 0},Q.prototype.created=function(){var t=this.proxy("traits.created")||this.proxy("traits.createdAt");if(t)return n(t)},Q.prototype.name=function(){var t=this.proxy("traits.name");if("string"==typeof t)return G(t)},Q.prototype.uid=function(){return this.userId()||this.username()||this.email()},Q.prototype.description=function(){return this.proxy("traits.description")||this.proxy("traits.background")},Q.prototype.avatar=function(){var t=this.traits();return a(t,"avatar")||a(t,"photoUrl")||a(t,"avatarUrl")},Q.prototype.username=J.proxy("traits.username");var Y=Q;function tt(t,e){J.call(this,t,e)}(0,s.inherit)(tt,J),tt.prototype.type=tt.prototype.action=function(){return"track"},tt.prototype.event=J.field("event"),tt.prototype.value=J.proxy("properties.value"),tt.prototype.category=J.proxy("properties.category"),tt.prototype.id=J.proxy("properties.id"),tt.prototype.name=J.proxy("properties.name"),tt.prototype.description=J.proxy("properties.description"),tt.prototype.plan=J.proxy("properties.plan"),tt.prototype.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},tt.prototype.query=J.proxy("options.query"),tt.prototype.properties=function(t){var e=this.field("properties")||{};for(var r in t=t||{}){var n=null==this[r]?this.proxy("properties."+r):this[r]();null!=n&&(e[t[r]]=n,delete e[r])}return e},tt.prototype.username=function(){return this.proxy("traits.username")||this.proxy("properties.username")||this.userId()||this.sessionId()},tt.prototype.email=function(){var t=this.proxy("traits.email")||this.proxy("properties.email")||this.proxy("options.traits.email");if(t)return t;var e=this.userId();return V(e)?e:void 0},tt.prototype.revenue=function(){var t=this.proxy("properties.revenue"),e=this.event();return!t&&e&&e.match(/^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i)&&(t=this.proxy("properties.total")),function(t){if(!t)return;if("number"==typeof t)return t;if("string"!=typeof t)return;if(t=t.replace(/\$/g,""),t=parseFloat(t),!isNaN(t))return t}(t)},tt.prototype.identify=function(){var t=this.json();return t.traits=this.traits(),new Y(t,this.opts)};var et=tt;function rt(t,e){J.call(this,t,e)}(0,s.inherit)(rt,J),rt.prototype.type=rt.prototype.action=function(){return"page"},rt.prototype.category=J.field("category"),rt.prototype.name=J.field("name"),rt.prototype.title=J.proxy("properties.title"),rt.prototype.path=J.proxy("properties.path"),rt.prototype.url=J.proxy("properties.url"),rt.prototype.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},rt.prototype.properties=function(t){var e=this.field("properties")||{},r=this.category(),n=this.name();for(var o in t=t||{},r&&(e.category=r),n&&(e.name=n),t){var i=null==this[o]?this.proxy("properties."+o):this[o]();null!=i&&(e[t[o]]=i,o!==t[o]&&delete e[o])}return e},rt.prototype.email=function(){var t=this.proxy("context.traits.email")||this.proxy("properties.email");if(t)return t;var e=this.userId();return V(e)?e:void 0},rt.prototype.fullName=function(){var t=this.category(),e=this.name();return e&&t?t+" "+e:e},rt.prototype.event=function(t){return t?"Viewed "+t+" Page":"Loaded a Page"},rt.prototype.track=function(t){var e=this.json();return e.event=this.event(t),e.timestamp=this.timestamp(),e.properties=this.properties(),new et(e,this.opts)};var nt=rt;function ot(t,e){nt.call(this,t,e)}(0,s.inherit)(ot,nt),ot.prototype.type=ot.prototype.action=function(){return"screen"},ot.prototype.event=function(t){return t?"Viewed "+t+" Screen":"Loaded a Screen"},ot.prototype.track=function(t){var e=this.json();return e.event=this.event(t),e.timestamp=this.timestamp(),e.properties=this.properties(),new et(e,this.opts)};var it=ot;function at(t,e){J.call(this,t,e)}(0,s.inherit)(at,J),at.prototype.type=function(){return"delete"};var ut=at;J.Alias=W,J.Group=K,J.Identify=Y,J.Track=et,J.Page=nt,J.Screen=it,J.Delete=ut;function st(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var r=dt.call(arguments,2);return function(){return e.apply(t,r.concat(dt.call(arguments)))}}var ct=J,pt=Object.prototype.toString,ft=[function(t){return function(){return t.apply(this,arguments)}},function(e){return function(t){return e.apply(this,arguments)}},function(r){return function(t,e){return r.apply(this,arguments)}},function(n){return function(t,e,r){return n.apply(this,arguments)}},function(o){return function(t,e,r,n){return o.apply(this,arguments)}},function(i){return function(t,e,r,n,o){return i.apply(this,arguments)}}],lt=function(t,e){if(!function(t){return"function"==typeof t}(e))throw new TypeError("Expected a function but got "+typeof e);return t=Math.max(function(t){var e=typeof t;return"number"==e||"object"==e&&"[object Number]"===pt.call(t)}(t)?t:0,0),ft[t]||(ft[t]=function(t){var e=function(t){for(var e=[],r=1;r<=t;r+=1)e.push("arg"+r);return e}(t).join(", "),r="".concat("  return function(",e,") {\n","    return func.apply(this, arguments);\n","  };");return new Function("func",r)}(t)),ft[t](e)},ht=Object.prototype.toString,yt=function(t,e){if(!function(t){var e=typeof t;return"number"==e||"object"==e&&"[object Number]"===ht.call(t)}(t))throw new TypeError("Expected a number but received "+typeof t);if(!function(t){return"function"==typeof t}(e))throw new TypeError("Expected a function but received "+typeof e);var r=0;return lt(e.length,function(){if(!((r+=1)<t))return e.apply(this,arguments)})},dt=[].slice;function vt(t,e,r){switch(arguments.length){case 3:case 2:return function(t,e,r){r=r||{};var n=bt(t)+"="+bt(e);null==e&&(r.maxage=-1);r.maxage&&(r.expires=new Date(+new Date+r.maxage));r.path&&(n+="; path="+r.path);r.domain&&(n+="; domain="+r.domain);r.expires&&(n+="; expires="+r.expires.toUTCString());r.secure&&(n+="; secure");document.cookie=n}(t,e,r);case 1:return function(t){return gt()[t]}(t);default:return gt()}}var mt=function(t){for(var e in t){"function"==typeof t[e]&&(t[e]=st(t,t[e]))}return t};function gt(){var t;try{t=document.cookie}catch(t){return"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t.stack||t),{}}return function(t){var e,r={},n=t.split(/ *; */);if(""==n[0])return r;for(var o=0;o<n.length;++o)e=n[o].split("="),r[wt(e[0])]=wt(e[1]);return r}(t)}function bt(t){try{return encodeURIComponent(t)}catch(t){console.error(t)}}function wt(t){try{return decodeURIComponent(t)}catch(t){console.error(t)}}function xt(t){return Boolean(t)&&"[object Object]"===At.call(t)}function jt(t,e,r,n){return Tt.call(e,n)&&void 0===t[n]&&(t[n]=r),e}function _t(t,e){if(!function(t){return Boolean(t)&&"object"==typeof t}(e))return e;t=t||jt;for(var r=Ot(2,arguments),n=0;n<r.length;n+=1)for(var o in r[n])t(e,r[n],r[n][o],o);return e}var kt=Math.max,Ot=function(t,e){var r=e?e.length:0;if(!r)return[];for(var n=kt(Number(t)||0,0),o=kt(r-n,0),i=new Array(o),a=0;a<o;a+=1)i[a]=e[a+n];return i},Et=Math.max,It=function(t){if(null==t||!t.length)return[];for(var e=new Array(Et(t.length-2,0)),r=1;r<t.length;r+=1)e[r-1]=t[r];return e},Tt=Object.prototype.hasOwnProperty,At=Object.prototype.toString,Nt=function(t){return _t.apply(null,[function(t,e,r,n){return Tt.call(e,n)&&(xt(t[n])&&xt(r)?t[n]=Nt(t[n],r):void 0===t[n]&&(t[n]=r)),e},t].concat(It(arguments)))},St=function(t){return _t.apply(null,[null,t].concat(It(arguments)))},zt=Nt;St.deep=zt;var Ct=t(function(t,r){r.parse=function(t){var e=document.createElement("a");return e.href=t,{href:e.href,host:e.host||location.host,port:"0"===e.port||""===e.port?function(t){switch(t){case"http:":return 80;case"https:":return 443;default:return location.port}}(e.protocol):e.port,hash:e.hash,hostname:e.hostname||location.hostname,pathname:"/"!=e.pathname.charAt(0)?"/"+e.pathname:e.pathname,protocol:e.protocol&&":"!=e.protocol?e.protocol:location.protocol,search:e.search,query:e.search.slice(1)}},r.isAbsolute=function(t){return 0==t.indexOf("//")||!!~t.indexOf("://")},r.isRelative=function(t){return!r.isAbsolute(t)},r.isCrossDomain=function(t){t=r.parse(t);var e=r.parse(window.location.href);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol}}),Dt=(Ct.parse,Ct.isAbsolute,Ct.isRelative,Ct.isCrossDomain,t(function(t,u){var i=Ct.parse;function e(t){for(var e=u.cookie,r=u.levels(t),n=0;n<r.length;++n){var o="__tld__",i=r[n],a={domain:"."+i};if(e(o,1,a),e(o))return e(o,null,a),i}return""}e.levels=function(t){var e=i(t).hostname.split("."),r=e[e.length-1],n=[];if(4===e.length&&r===parseInt(r,10))return n;if(e.length<=1)return n;for(var o=e.length-2;0<=o;--o)n.push(e.slice(o).join("."));return n},e.cookie=vt,u=t.exports=e}));function Lt(t){this.options(t)}Lt.prototype.options=function(t){if(0===arguments.length)return this._options;t=t||{};var e="."+Dt(window.location.href);"."===e&&(e=null),this._options=St(t,{maxage:31536e6,path:"/",domain:e}),this.set("ajs:test",!0),this.get("ajs:test")||(this._options.domain=null),this.remove("ajs:test")},Lt.prototype.set=function(t,e){try{return e=JSON.stringify(e),vt(t,e,u(this._options)),!0}catch(t){return!1}},Lt.prototype.get=function(t){try{var e=vt(t);return e=e?JSON.parse(e):null}catch(t){return null}},Lt.prototype.remove=function(t){try{return vt(t,null,u(this._options)),!0}catch(t){return!1}};var Pt=mt(new Lt),qt=Lt;Pt.Cookie=qt;function Mt(t,e){return Ut.call(t,e)}function Bt(t,e){return Zt.call(t,e)}function $t(t,e){e=e||Bt;for(var r=[],n=0,o=t.length;n<o;n+=1)e(t,n)&&r.push(String(n));return r}function Rt(t){return null!=t&&(Wt(t)||"function"!==t&&function(t){var e=typeof t;return"number"==e||"object"==e&&"[object Number]"===Vt.call(t)}(t.length))}var Ft,Zt=Object.prototype.hasOwnProperty,Ut=String.prototype.charAt,Jt=Object.prototype.toString,Ht=function(t){return null==t?[]:function(t){return"[object String]"===Jt.call(t)}(t)?$t(t,Mt):function(t){return null!=t&&"function"!=typeof t&&"number"==typeof t.length}(t)?$t(t,Bt):function(t,e){e=e||Bt;var r=[];for(var n in t)e(t,n)&&r.push(String(n));return r}(t)},Vt=Object.prototype.toString,Wt="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===Vt.call(t)},Xt=function(t,e){return(Rt(e)?function(t,e){for(var r=0;r<e.length&&!1!==t(e[r],r,e);r+=1);}:function(t,e){for(var r=Ht(e),n=0;n<r.length&&!1!==t(e[r[n]],r[n],e);n+=1);}).call(this,t,e)},Kt=t(function(t){var e,r=Object.prototype,n=r.hasOwnProperty,o=r.toString;"function"==typeof Symbol&&(e=Symbol.prototype.valueOf);function i(t){return t!=t}var a={boolean:1,number:1,string:1,undefined:1},u=/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/,s=/^[A-Fa-f0-9]+$/,c=t.exports={};c.a=c.type=function(t,e){return typeof t===e},c.defined=function(t){return void 0!==t},c.empty=function(t){var e,r=o.call(t);if("[object Array]"===r||"[object Arguments]"===r||"[object String]"===r)return 0===t.length;if("[object Object]"!==r)return!t;for(e in t)if(n.call(t,e))return!1;return!0},c.equal=function(t,e){if(t===e)return!0;var r,n=o.call(t);if(n!==o.call(e))return!1;if("[object Object]"===n){for(r in t)if(!(c.equal(t[r],e[r])&&r in e))return!1;for(r in e)if(!(c.equal(t[r],e[r])&&r in t))return!1;return!0}if("[object Array]"!==n)return"[object Function]"===n?t.prototype===e.prototype:"[object Date]"===n&&t.getTime()===e.getTime();if((r=t.length)!==e.length)return!1;for(;--r;)if(!c.equal(t[r],e[r]))return!1;return!0},c.hosted=function(t,e){var r=typeof e[t];return"object"==r?!!e[t]:!a[r]},c.instance=c.instanceof=function(t,e){return t instanceof e},c.nil=c.null=function(t){return null===t},c.undef=c.undefined=function(t){return void 0===t},c.args=c.arguments=function(t){var e="[object Arguments]"===o.call(t),r=!c.array(t)&&c.arraylike(t)&&c.object(t)&&c.fn(t.callee);return e||r},c.array=Array.isArray||function(t){return"[object Array]"===o.call(t)},c.args.empty=function(t){return c.args(t)&&0===t.length},c.array.empty=function(t){return c.array(t)&&0===t.length},c.arraylike=function(t){return!!t&&!c.bool(t)&&n.call(t,"length")&&isFinite(t.length)&&c.number(t.length)&&0<=t.length},c.bool=c.boolean=function(t){return"[object Boolean]"===o.call(t)},c.false=function(t){return c.bool(t)&&!1===Boolean(Number(t))},c.true=function(t){return c.bool(t)&&!0===Boolean(Number(t))},c.date=function(t){return"[object Date]"===o.call(t)},c.element=function(t){return void 0!==t&&"undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&1===t.nodeType},c.error=function(t){return"[object Error]"===o.call(t)},c.fn=c.function=function(t){return"undefined"!=typeof window&&t===window.alert||"[object Function]"===o.call(t)},c.number=function(t){return"[object Number]"===o.call(t)},c.infinite=function(t){return t===1/0||t===-1/0},c.decimal=function(t){return c.number(t)&&!i(t)&&!c.infinite(t)&&t%1!=0},c.divisibleBy=function(t,e){var r=c.infinite(t),n=c.infinite(e),o=c.number(t)&&!i(t)&&c.number(e)&&!i(e)&&0!==e;return r||n||o&&t%e==0},c.integer=c.int=function(t){return c.number(t)&&!i(t)&&t%1==0},c.maximum=function(t,e){if(i(t))throw new TypeError("NaN is not a valid value");if(!c.arraylike(e))throw new TypeError("second argument must be array-like");for(var r=e.length;0<=--r;)if(t<e[r])return!1;return!0},c.minimum=function(t,e){if(i(t))throw new TypeError("NaN is not a valid value");if(!c.arraylike(e))throw new TypeError("second argument must be array-like");for(var r=e.length;0<=--r;)if(t>e[r])return!1;return!0},c.nan=function(t){return!c.number(t)||t!=t},c.even=function(t){return c.infinite(t)||c.number(t)&&t==t&&t%2==0},c.odd=function(t){return c.infinite(t)||c.number(t)&&t==t&&t%2!=0},c.ge=function(t,e){if(i(t)||i(e))throw new TypeError("NaN is not a valid value");return!c.infinite(t)&&!c.infinite(e)&&e<=t},c.gt=function(t,e){if(i(t)||i(e))throw new TypeError("NaN is not a valid value");return!c.infinite(t)&&!c.infinite(e)&&e<t},c.le=function(t,e){if(i(t)||i(e))throw new TypeError("NaN is not a valid value");return!c.infinite(t)&&!c.infinite(e)&&t<=e},c.lt=function(t,e){if(i(t)||i(e))throw new TypeError("NaN is not a valid value");return!c.infinite(t)&&!c.infinite(e)&&t<e},c.within=function(t,e,r){if(i(t)||i(e)||i(r))throw new TypeError("NaN is not a valid value");if(!c.number(t)||!c.number(e)||!c.number(r))throw new TypeError("all arguments must be numbers");return c.infinite(t)||c.infinite(e)||c.infinite(r)||e<=t&&t<=r},c.object=function(t){return"[object Object]"===o.call(t)},c.hash=function(t){return c.object(t)&&t.constructor===Object&&!t.nodeType&&!t.setInterval},c.regexp=function(t){return"[object RegExp]"===o.call(t)},c.string=function(t){return"[object String]"===o.call(t)},c.base64=function(t){return c.string(t)&&(!t.length||u.test(t))},c.hex=function(t){return c.string(t)&&(!t.length||s.test(t))},c.symbol=function(t){return"function"==typeof Symbol&&"[object Symbol]"===o.call(t)&&"symbol"==typeof e.call(t)}}),Gt=String.prototype.indexOf,Qt=function(e,t){var r=!1;return"string"==typeof t?-1!==Gt.call(t,e):(Xt(function(t){if(function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}(t,e))return!(r=!0)},t),r)},Yt=function(n,t){if("function"!=typeof n)throw new TypeError("Expected a function but received a "+typeof n);var o=[];return Xt(function(t,e,r){o.push(n(t,e,r))},t),o};if(f.crypto&&crypto.getRandomValues){var te=new Uint8Array(16);Ft=function(){return crypto.getRandomValues(te),te}}if(!Ft){var ee=new Array(16);Ft=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),ee[e]=t>>>((3&e)<<3)&255;return ee}}for(var re=Ft,ne=[],oe={},ie=0;ie<256;ie++)ne[ie]=(ie+256).toString(16).substr(1),oe[ne[ie]]=ie;function ae(t,e){var r=e||0,n=ne;return n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]}var ue=re(),se=[1|ue[0],ue[1],ue[2],ue[3],ue[4],ue[5]],ce=16383&(ue[6]<<8|ue[7]),pe=0,fe=0;function le(t,e,r){var n=e&&r||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||re)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var i=0;i<16;i++)e[n+i]=o[i];return e||ae(o)}var he=le;he.v1=function(t,e,r){var n=e&&r||0,o=e||[],i=void 0!==(t=t||{}).clockseq?t.clockseq:ce,a=void 0!==t.msecs?t.msecs:(new Date).getTime(),u=void 0!==t.nsecs?t.nsecs:fe+1,s=a-pe+(u-fe)/1e4;if(s<0&&void 0===t.clockseq&&(i=i+1&16383),(s<0||pe<a)&&void 0===t.nsecs&&(u=0),1e4<=u)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");pe=a,ce=i;var c=(1e4*(268435455&(a+=122192928e5))+(fe=u))%4294967296;o[n++]=c>>>24&255,o[n++]=c>>>16&255,o[n++]=c>>>8&255,o[n++]=255&c;var p=a/4294967296*1e4&268435455;o[n++]=p>>>8&255,o[n++]=255&p,o[n++]=p>>>24&15|16,o[n++]=p>>>16&255,o[n++]=i>>>8|128,o[n++]=255&i;for(var f=t.node||se,l=0;l<6;l++)o[n+l]=f[l];return e||ae(o)},he.v4=le,he.parse=function(t,e,r){var n=e&&r||0,o=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){o<16&&(e[n+o++]=oe[t])});o<16;)e[n+o++]=0;return e},he.unparse=ae;var ye=he,de=Object.prototype.hasOwnProperty,ve=function(t,e){var r=Yt(function(t){return t.toLowerCase()},e),n=t.options||{},o=n.integrations||{},i=n.providers||{},a=n.context||{},u={};Xt(function(t,e){s(e)&&(de.call(o,e)||(o[e]=t),delete n[e])},n),delete n.providers,Xt(function(t,e){s(e)&&"object"!==c(o[e])&&(de.call(o,e)&&"boolean"==typeof i[e]||(o[e]=t))},i),Xt(function(t,e){Qt(e,me)?u[e]=n[e]:a[e]=n[e]},n),delete t.options,u.integrations=o,u.context=a,(u=St(u,t)).eventId||(u.eventId=ye.v4());return u;function s(t){return!(!Qt(t,e)&&"all"!==t.toLowerCase()&&!Qt(t.toLowerCase(),r))}},me=["integrations","anonymousId","eventId","timestamp","context"];var ge=function(){for(var t,e=document.getElementsByTagName("link"),r=0;t=e[r];r++)if("canonical"===t.getAttribute("rel"))return t.getAttribute("href")};var be=function(){return{path:function(){var t=ge();return t?Ct.parse(t).pathname:window.location.pathname}(),referrer:document.referrer,search:function(){var t=window.location.href,e=t.indexOf("?");return-1===e?"":t.slice(e,-1)}(),title:document.title,url:function(t){var e=ge();if(e)return Qt("?",e)?e:e+t;var r=window.location.href,n=r.indexOf("#");return-1===n?r:r.slice(0,n)}(location.search)}},we=function(){var n,i={},t="undefined"!=typeof window?window:f,e=t.document,o="localStorage";if(i.disabled=!1,i.version="1.3.20",i.set=function(t,e){},i.get=function(t,e){},i.has=function(t){return void 0!==i.get(t)},i.remove=function(t){},i.clear=function(){},i.transact=function(t,e,r){null==r&&(r=e,e=null),null==e&&(e={});var n=i.get(t,e);r(n),i.set(t,n)},i.getAll=function(){var r={};return i.forEach(function(t,e){r[t]=e}),r},i.forEach=function(){},i.serialize=function(t){return JSON.stringify(t)},i.deserialize=function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e||void 0}},function(){try{return o in t&&t[o]}catch(t){return!1}}())n=t[o],i.set=function(t,e){return void 0===e?i.remove(t):(n.setItem(t,i.serialize(e)),e)},i.get=function(t,e){var r=i.deserialize(n.getItem(t));return void 0===r?e:r},i.remove=function(t){n.removeItem(t)},i.clear=function(){n.clear()},i.forEach=function(t){for(var e=0;e<n.length;e++){var r=n.key(e);t(r,i.get(r))}};else if(e&&e.documentElement.addBehavior){var a,r;try{(r=new ActiveXObject("htmlfile")).open(),r.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></iframe>'),r.close(),a=r.w.frames[0].document,n=a.createElement("div")}catch(t){n=e.createElement("div"),a=e.body}var u=function(r){return function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(n),a.appendChild(n),n.addBehavior("#default#userData"),n.load(o);var e=r.apply(i,t);return a.removeChild(n),e}},s=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),c=function(t){return t.replace(/^d/,"___$&").replace(s,"___")};i.set=u(function(t,e,r){return e=c(e),void 0===r?i.remove(e):(t.setAttribute(e,i.serialize(r)),t.save(o),r)}),i.get=u(function(t,e,r){e=c(e);var n=i.deserialize(t.getAttribute(e));return void 0===n?r:n}),i.remove=u(function(t,e){e=c(e),t.removeAttribute(e),t.save(o)}),i.clear=u(function(t){var e=t.XMLDocument.documentElement.attributes;t.load(o);for(var r=e.length-1;0<=r;r--)t.removeAttribute(e[r].name);t.save(o)}),i.forEach=u(function(t,e){for(var r,n=t.XMLDocument.documentElement.attributes,o=0;r=n[o];++o)e(r.name,i.deserialize(t.getAttribute(r.name)))})}try{var p="__storejs__";i.set(p,p),i.get(p)!=p&&(i.disabled=!0),i.remove(p)}catch(t){i.disabled=!0}return i.enabled=!i.disabled,i}();function xe(t){this.options(t)}xe.prototype.options=function(t){if(0===arguments.length)return this._options;St(t=t||{},{enabled:!0}),this.enabled=t.enabled&&we.enabled,this._options=t},xe.prototype.set=function(t,e){return!!this.enabled&&we.set(t,e)},xe.prototype.get=function(t){return this.enabled?we.get(t):null},xe.prototype.remove=function(t){return!!this.enabled&&we.remove(t)};var je=mt(new xe),_e=xe;je.Store=_e;var ke=Object.prototype.hasOwnProperty,Oe=function(t){for(var e=Array.prototype.slice.call(arguments,1),r=0;r<e.length;r+=1)for(var n in e[r])ke.call(e[r],n)&&(t[n]=e[r][n]);return t},Ee=Object.prototype.hasOwnProperty,Ie=mt(new Te);function Te(){this.store={}}Te.prototype.set=function(t,e){return this.store[t]=u(e),!0},Te.prototype.get=function(t){if(Ee.call(this.store,t))return u(this.store[t])},Te.prototype.remove=function(t){return delete this.store[t],!0};var Ae=Ne;function Ne(t){this.options(t),this.initialize()}function Se(t){this.defaults=Se.defaults,Ae.call(this,t)}Ne.prototype.initialize=function(){if(Pt.set("ajs:cookies",!0),Pt.get("ajs:cookies"))return Pt.remove("ajs:cookies"),void(this._storage=Pt);je.enabled?this._storage=je:this._storage=Ie},Ne.prototype.storage=function(){return this._storage},Ne.prototype.options=function(t){if(0===arguments.length)return this._options;this._options=St(t||{},this.defaults||{})},Ne.prototype.id=function(t){switch(arguments.length){case 0:return this._getId();case 1:return this._setId(t)}},Ne.prototype._getId=function(){var t=this._options.persist?this.storage().get(this._options.cookie.key):this._id;return void 0===t?null:t},Ne.prototype._setId=function(t){this._options.persist?this.storage().set(this._options.cookie.key,t):this._id=t},Ne.prototype.properties=Ne.prototype.traits=function(t){switch(arguments.length){case 0:return this._getTraits();case 1:return this._setTraits(t)}},Ne.prototype._getTraits=function(){var t=this._traits;return Object.assign({},t)},Ne.prototype._setTraits=function(t){t=t||{},this._traits=t},Ne.prototype.identify=function(t,e){e=e||{};var r=this.id();null!==r&&r!==t||(e=Oe(this.traits(),e)),t&&this.id(t),this.traits(e),this.save()},Ne.prototype.save=function(){return!!this._options.persist&&(Pt.set(this._options.cookie.key,this.id()),je.set(this._options.localStorage.key,this.traits()),!0)},Ne.prototype.load=function(){this.id(Pt.get(this._options.cookie.key)),this.traits(je.get(this._options.localStorage.key))},Se.defaults={persist:!0,cookie:{key:"ajs_user_id"},localStorage:{key:"ajs_user_traits"}},e(Se,Ae),Se.prototype.id=function(t){var e=this._getId(),r=Ae.prototype.id.apply(this,arguments);return null==e||e!=t&&t&&this.anonymousId(null),r},Se.prototype.anonymousId=function(t){var e=this.storage();return arguments.length?(e.set("ajs_anonymous_id",t),this):(t=e.get("ajs_anonymous_id"))?t:(t=ye.v4(),e.set("ajs_anonymous_id",t),e.get("ajs_anonymous_id"))},Se.prototype.load=function(){Ae.prototype.load.call(this)};var ze=mt(new Se),Ce=Se;ze.User=Ce;var De=ct.Identify,Le=ct.Page,Pe=ct.Track;function qe(){this._options({}),this.Integrations={},this._integrations={},this._readied=!1,this._timeout=300,mt(this)}i(qe.prototype),qe.prototype.use=function(t){return t(this),this},qe.prototype.addIntegration=function(t){var e=t.prototype.name;if(!e)throw new TypeError("attempted to add an invalid integration");return this.Integrations[e]=t,this},qe.prototype.init=qe.prototype.initialize=function(r,e){r=r||{},e=e||{},this._options(e),this._readied=!1;var n=this;Xt(function(t,e){n.Integrations[e]||delete r[e]},r),Xt(function(t,e){var r=new n.Integrations[e](u(t));n.add(r)},r);var t=this._integrations;ze.load();var o=Ht(t).length,i=yt(o,function(){n._readied=!0,n.emit("ready")});return o<=0&&i(),Xt(function(t){e.initialPageview&&!1===t.options.initialPageview&&(t.page=yt(2,t.page)),t.analytics=n,t.once("ready",i),t.initialize()},t),this.emit("initialize",r,e),this},qe.prototype.setAnonymousId=function(t){return this.user().anonymousId(t),this},qe.prototype.add=function(t){return this._integrations[t.name]=t,this},qe.prototype.identify=function(t,e,r,n){Kt.fn(r)&&(n=r,r=null),Kt.fn(e)&&(n=e,e=r=null),Kt.object(t)&&(r=e,e=t,t=ze.id()),ze.identify(t,e);var o=this.normalize({options:r,traits:ze.traits(),userId:ze.id()});return this._invoke("identify",new De(o)),this.emit("identify",t,e,r),this._callback(n),this},qe.prototype.user=function(){return ze},qe.prototype.track=function(t,e,r,n){Kt.fn(r)&&(n=r,r=null),Kt.fn(e)&&(n=e,e=r=null);var o=this.options.plan||{},i=o.track||{},a=this.normalize({properties:e,options:r,event:t});if(o=i[t]){if(!1===o.enabled)return this._callback(n);St(a.integrations,o.integrations||{})}return this._invoke("track",new Pe(a)),this.emit("track",t,e,r),this._callback(n),this},qe.prototype.exception=function(t,e,r,n){if(Kt.fn(r)&&(n=r,r=null),Kt.fn(e)&&(n=e,e=r=null),e instanceof Error){var o={};e.name&&(o.name=e.name),e.code&&(o.code=e.code),e.message&&(o.message=e.message),e.stack&&(o.stack=e.stack),e=o}var i=this.options.plan||{},a=i.track||{},u=this.normalize({properties:e,options:r,event:t});if(i=a[t]){if(!1===i.enabled)return this._callback(n);St(u.integrations,i.integrations||{})}return this._invoke("exception",new Pe(u)),this.emit("exception",t,e,r),this._callback(n),this},qe.prototype.page=function(t,e,r,n,o){Kt.fn(n)&&(o=n,n=null),Kt.fn(r)&&(o=r,n=r=null),Kt.fn(e)&&(o=e,n=r=e=null),"object"===c(t)&&(n=e,r=t,e=t=null),"object"===c(e)&&(n=r,r=e,e=null),"string"===c(t)&&"string"!==c(e)&&(e=t,t=null),r=u(r)||{},e&&(r.name=e),t&&(r.category=t);var i=be();St(r,i);var a=this.normalize({properties:r,category:t,options:n,name:e});return this._invoke("page",new Le(a)),this.emit("page",t,e,r,n),this._callback(o),this},qe.prototype.ready=function(t){return Kt.fn(t)&&(this._readied?nextTick(t):this.once("ready",t)),this},qe.prototype._options=function(t){return t=t||{},this.options=t,Pt.options(t.cookie),je.options(t.localStorage),ze.options(t.user),this},qe.prototype._callback=function(t){return Kt.fn(t)&&(this._timeout?setTimeout(t,this._timeout):nextTick(t)),this},qe.prototype._invoke=function(r,n){return this.emit("invoke",n),Xt(function(t,e){n.enabled(e)&&t.invoke.call(t,r,n)},this._integrations),this},qe.prototype.normalize=function(t){return(t=ve(t,Ht(this._integrations))).anonymousId&&ze.anonymousId(t.anonymousId),t.anonymousId=ze.anonymousId(),t.context.page=St(t.context.page||{},be()),t};var Me=qe,Be=ye.v4;Me.uuid=Be;var $e=function(n,t){if("function"!=typeof n)throw new TypeError("`predicate` must be a function but was a "+typeof n);var o=!0;return Xt(function(t,e,r){if(!(o=!!n(t,e,r)))return!1},t),o},Re=f.JSON&&"function"==typeof JSON.stringify?JSON.stringify:String;function Fe(t){var r=Array.prototype.slice.call(arguments,1),n=0;return t.replace(/%([a-z])/gi,function(t,e){return Fe[e]?Fe[e](r[n++]):t+e})}Fe.o=Re,Fe.s=String,Fe.d=parseInt;function Ze(t,e){return t.addEventListener?function(r,n){r.addEventListener("load",function(t,e){n(null,e)},!1),r.addEventListener("error",function(t){var e=new Error('script error "'+r.src+'"');e.event=t,n(e)},!1)}(t,e):function(r,n){r.attachEvent("onreadystatechange",function(t){/complete|loaded/.test(r.readyState)&&n(null,t)}),r.attachEvent("onerror",function(t){var e=new Error('failed to load the script "'+r.src+'"');e.event=t||window.event,n(e)})}(t,e)}var Ue,Je,He=Fe,Ve=function(n,o,t){if("function"!=typeof n)throw new TypeError("Expected a function but received a "+typeof n);return Xt(function(t,e,r){o=n(o,t,e,r)},t),o};Ue=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t},Je=function(t){var e,r=document.createTextNode(""),n=0;return new t(function(){var t;e&&(t=e,e=null,"function"!=typeof t?t.forEach(function(t){t()}):t())}).observe(r,{characterData:!0}),function(t){Ue(t),e?"function"==typeof e?e=[e,t]:e.push(t):(e=t,r.data=n=++n%2)}};var We=function(){if("undefined"!=typeof process&&process&&"function"==typeof process.nextTick)return process.nextTick;if("object"==typeof document&&document){if("function"==typeof MutationObserver)return Je(MutationObserver);if("function"==typeof WebKitMutationObserver)return Je(WebKitMutationObserver)}return"function"==typeof setImmediate?function(t){setImmediate(Ue(t))}:"function"==typeof setTimeout?function(t){setTimeout(Ue(t),0)}:null}();var Xe=function(t,e){if(!t)throw new Error("Can't load nothing...");"string"===c(t)&&(t={src:t});var r="https:"===document.location.protocol||"chrome-extension:"===document.location.protocol;t.src&&0===t.src.indexOf("//")&&(t.src=(r?"https:":"http:")+t.src),r&&t.https?t.src=t.https:!r&&t.http&&(t.src=t.http);var n=document.createElement("script");return n.type="text/javascript",n.async=!0,n.src=t.src,"function"===c(e)&&Ze(n,e),We(function(){var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t)}),n},Ke=function(t){return Ge.test(t)?t.toLowerCase():Qe.test(t)?(function(t){return t.replace(Ye,function(t,e){return e?" "+e:""})}(t)||t).toLowerCase():function(t){return t.replace(tr,function(t,e,r){return e+" "+r.toLowerCase().split("").join(" ")})}(t).toLowerCase()},Ge=/\s/,Qe=/[\W_]/;var Ye=/[\W_]+(.|$)/g;var tr=/(.)([A-Z]+)/g;var er,rr=t(function(t,e){function a(){}var r=Object.prototype.hasOwnProperty,n=window.onerror;function o(t){return!!Kt.object(t)&&(!!Kt.string(t.key)&&!!r.call(t,"value"))}i(e),e.initialize=function(){var t=this.ready;We(t)},e.loaded=function(){return!1},e.page=function(t){},e.track=function(t){},e.map=function(t,e){var i=Ke(e),a=function(t){if(Kt.array(t))return $e(o,t)?"mixed":"array";return Kt.object(t)?"map":"unknown"}(t);return"unknown"===a?[]:Ve(function(t,e,r){var n,o;return"map"===a&&(n=r,o=e),"array"===a&&(o=n=e),"mixed"===a&&(n=e.key,o=e.value),Ke(n)===i&&t.push(o),t},[],t)},e.invoke=function(t){if(this[t]){var e,r=Array.prototype.slice.call(arguments,1);if(!this._ready)return this.queue(t,r);try{e=this[t].apply(this,r)}catch(t){}return e}},e.queue=function(t,e){this._queue.push({method:t,args:e})},e.flush=function(){this._ready=!0;var e=this;Xt(function(t){e[t.method].apply(e,t.args)},this._queue),this._queue.length=0},e.reset=function(){for(var t=0;t<this.globals.length;t++)window[this.globals[t]]=void 0;window.onerror=n,window.onload=null},e.load=function(t,e,r){"function"==typeof t&&(r=t,t=e=null),t&&"object"==typeof t&&(r=e,e=t,t=null),"function"==typeof e&&(r=e,e=null),t=t||"library",e=e||{},e=this.locals(e);var n=this.templates[t];if(!n)throw new Error(He('template "%s" not defined.',t));var o,i=function(t,n){return Ve(function(t,e,r){return t[r]=e.replace(/\{\{\ *(\w+)\ *\}\}/g,function(t,e){return n[e]}),t},{},t.attrs)}(n,e);switch(r=r||a,n.type){case"img":i.width=1,i.height=1,o=function(t,e){e=e||function(){};var r=new Image;return r.onerror=function(r,n,o){return function(t){t=t||window.event;var e=new Error(n);e.event=t,e.source=o,r(e)}}(e,"failed to load pixel",r),r.onload=function(){e()},r.src=t.src,r.width=1,r.height=1,r}(i,r);break;case"script":o=Xe(i,function(t){if(!t)return r()}),delete i.src,Xt(function(t,e){o.setAttribute(e,t)},i);break;case"iframe":o=function(t,e){if(!t)throw new Error("Cant load nothing...");Kt.string(t)&&(t={src:t});var r="https:"===document.location.protocol||"chrome-extension:"===document.location.protocol;t.src&&0===t.src.indexOf("//")&&(t.src=r?"https:"+t.src:"http:"+t.src),r&&t.https?t.src=t.https:!r&&t.http&&(t.src=t.http);var n=document.createElement("iframe");return n.src=t.src,n.width=t.width||1,n.height=t.height||1,n.style.display="none",Kt.fn(e)&&Ze(n,e),We(function(){var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t)}),n}(i,r)}return o},e.locals=function(r){r=r||{};var t=Math.floor((new Date).getTime()/36e5);return r.hasOwnProperty("cache")||(r.cache=t),Xt(function(t,e){r.hasOwnProperty(e)||(r[e]=t)},this.options),r},e.ready=function(){this.emit("ready")},e._wrapInitialize=function(){var e=this.initialize;this.initialize=function(){this._initialized=!0;var t=e.apply(this,arguments);return this.emit("initialize"),t}},e._wrapPage=function(){if(this._assumesPageview)return this.page=yt(2,this.page)},e._wrapTrack=function(){var e=this.track;this.track=function(t){t.event();return e.apply(this,arguments)}}}),nr=(rr.initialize,rr.loaded,rr.page,rr.track,rr.map,rr.invoke,rr.queue,rr.flush,rr.reset,rr.load,rr.locals,rr.ready,rr._wrapInitialize,rr._wrapPage,rr._wrapTrack,function(t,e){if("string"!=typeof t)throw new TypeError("String expected");e=e||document;var r=/<([\w:]+)/.exec(t);if(!r)return e.createTextNode(t);t=t.replace(/^\s+|\s+$/g,"");var n=r[1];if("body"==n){return(o=e.createElement("html")).innerHTML=t,o.removeChild(o.lastChild)}var o,i=ir[n]||ir._default,a=i[0],u=i[1],s=i[2];(o=e.createElement("div")).innerHTML=u+t+s;for(;a--;)o=o.lastChild;if(o.firstChild==o.lastChild)return o.removeChild(o.firstChild);var c=e.createDocumentFragment();for(;o.firstChild;)c.appendChild(o.removeChild(o.firstChild));return c}),or=!1;"undefined"!=typeof document&&((er=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',or=!er.getElementsByTagName("link").length,er=void 0);var ir={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:or?[1,"X<div>","</div>"]:[0,"",""]};ir.td=ir.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],ir.option=ir.optgroup=[1,'<select multiple="multiple">',"</select>"],ir.thead=ir.tbody=ir.colgroup=ir.caption=ir.tfoot=[1,"<table>","</table>"],ir.polyline=ir.ellipse=ir.polygon=ir.circle=ir.text=ir.line=ir.path=ir.rect=ir.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var ar=t(function(t,e){i(e),e.option=function(t,e){return this.prototype.defaults[t]=e,this},e.mapping=function(e){return this.option(e,[]),this.prototype[e]=function(t){return this.map(this.options[e],t)},this},e.global=function(t){return this.prototype.globals.push(t),this},e.assumesPageview=function(){return this.prototype._assumesPageview=!0,this},e.readyOnLoad=function(){return this.prototype._readyOnLoad=!0,this},e.readyOnInitialize=function(){return this.prototype._readyOnInitialize=!0,this},e.tag=function(t,e){return null==e&&(e=t,t="library"),this.prototype.templates[t]=function(r){r=r.replace(' src="',' data-src="');var t=nr(r),n={};return Xt(function(t){var e="data-src"===t.name?"src":t.name;Qt(t.name+"=",r)&&(n[e]=t.value)},t.attributes),{type:t.tagName.toLowerCase(),attrs:n}}(e),this}});ar.option,ar.mapping,ar.global,ar.assumesPageview,ar.readyOnLoad,ar.readyOnInitialize,ar.tag;function ur(t){function e(t){if(t&&t.addIntegration)return t.addIntegration(e);this.options=St(u(t)||{},this.defaults),this._queue=[],this.once("ready",st(this,this.flush)),e.emit("construct",this),this.ready=st(this,this.ready),this._wrapInitialize(),this._wrapPage(),this._wrapTrack()}return e.prototype.defaults={},e.prototype.globals=[],e.prototype.templates={},e.prototype.name=t,Oe(e,ar),Oe(e.prototype,rr),e}var sr=new Me;return sr.VERSION="3.0.0",sr.createIntegration=ur,sr}();